!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/material/snack-bar"),require("@angular/cdk/tree"),require("rxjs"),require("@angular/router"),require("lodash"),require("@angular/core"),require("@angular/material/toolbar"),require("@angular/material/expansion"),require("@angular/material/form-field"),require("@angular/material/select"),require("@angular/material/list"),require("@angular/material/icon"),require("@angular/material/card"),require("@angular/cdk/layout"),require("@angular/material"),require("@angular/material/progress-spinner"),require("@angular/material/dialog"),require("@angular/material/tabs"),require("@angular/material/datepicker"),require("@angular/material/stepper"),require("@angular/material/chips"),require("@angular/cdk/drag-drop"),require("@angular/forms"),require("@angular/common"),require("@angular/material/tree")):"function"==typeof define&&define.amd?define("helisa-lib",["exports","@angular/material/snack-bar","@angular/cdk/tree","rxjs","@angular/router","lodash","@angular/core","@angular/material/toolbar","@angular/material/expansion","@angular/material/form-field","@angular/material/select","@angular/material/list","@angular/material/icon","@angular/material/card","@angular/cdk/layout","@angular/material","@angular/material/progress-spinner","@angular/material/dialog","@angular/material/tabs","@angular/material/datepicker","@angular/material/stepper","@angular/material/chips","@angular/cdk/drag-drop","@angular/forms","@angular/common","@angular/material/tree"],t):t(e["helisa-lib"]={},e.ng.material["snack-bar"],e.ng.cdk.tree,e.rxjs,e.ng.router,e._,e.ng.core,e.ng.material.toolbar,e.ng.material.expansion,e.ng.material["form-field"],e.ng.material.select,e.ng.material.list,e.ng.material.icon,e.ng.material.card,e.ng.cdk.layout,e.ng.material,e.ng.material["progress-spinner"],e.ng.material.dialog,e.ng.material.tabs,e.ng.material.datepicker,e.ng.material.stepper,e.ng.material.chips,e.ng.cdk["drag-drop"],e.ng.forms,e.ng.common,e.ng.material.tree)}(this,function(e,t,a,n,o,r,i,l,s,c,d,u,p,h,m,g,f,b,y,v,M,C,T,S,w,O){"use strict";var E=(x.prototype.ngOnInit=function(){""!=this.value&&this.inputFormControl.setValue(this.value)},x.prototype.onDone=function(){this.inputFormControl.valid&&this.done.emit(this.inputFormControl.value)},x.prototype.onCancel=function(){this.cancel.emit()},x.decorators=[{type:i.Component,args:[{selector:"hel-input-with-button",template:'<div>\r\n  <mat-form-field>\r\n    <input matInput [placeholder]="placeholder" [formControl]= "inputFormControl">    \r\n    <mat-icon matSuffix (click)="onDone()">done</mat-icon>\r\n    <mat-icon matSuffix (click)="onCancel()">close</mat-icon>\r\n    <mat-error *ngIf="inputFormControl.hasError(\'required\')">\r\n      {{ requiredMessage }}\r\n    </mat-error>\r\n  </mat-form-field>\r\n</div>\r\n',styles:[""]}]}],x.ctorParameters=function(){return[]},x.propDecorators={placeholder:[{type:i.Input}],inputFormControl:[{type:i.Input}],requiredMessage:[{type:i.Input}],value:[{type:i.Input}],done:[{type:i.Output}],cancel:[{type:i.Output}]},x);function x(){this.placeholder="",this.inputFormControl=new S.FormControl("",S.Validators.required),this.requiredMessage="El campo es requerido",this.value="",this.done=new i.EventEmitter,this.cancel=new i.EventEmitter}var D=(I.prototype.ngOnInit=function(){},I.decorators=[{type:i.Component,args:[{selector:"hel-toast",template:"<div>\r\n  <span>{{ data.message }}</span>\r\n  <span>{{ data.type }}</span>\r\n</div>\r\n",styles:[""]}]}],I.ctorParameters=function(){return[{type:undefined,decorators:[{type:i.Inject,args:[g.MAT_SNACK_BAR_DATA]}]}]},I);function I(e){this.data=e}var R=(P.prototype.showToast=function(e,t){this.snackBar.openFromComponent(D,{data:{message:t,type:e},duration:1e3*this.durationInSeconds})},P.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],P.ctorParameters=function(){return[{type:g.MatSnackBar}]},P.ngInjectableDef=i.defineInjectable({factory:function(){return new P(i.inject(t.MatSnackBar))},token:P,providedIn:"root"}),P);function P(e){this.snackBar=e,this.durationInSeconds=5}var N={ERROR:"ERROR",CONFIRMATION:"CONFIRMATION"},k=(H.prototype.ngOnInit=function(){},H.prototype.onCancel=function(){this.dialogRef.close()},H.decorators=[{type:i.Component,args:[{selector:"hel-alert",template:'<h1 mat-dialog-title>{{ title }}</h1>\r\n<div mat-dialog-content>\r\n  {{ content }}\r\n</div>\r\n<div mat-dialog-actions>\r\n    <button mat-button *ngIf="hasCancel" [mat-dialog-close]="false" >cancelar</button>\r\n    <button mat-button [mat-dialog-close]="true" cdkFocusInitial>aceptar</button>\r\n</div>',styles:[""]}]}],H.ctorParameters=function(){return[{type:g.MatDialogRef},{type:undefined,decorators:[{type:i.Inject,args:[g.MAT_DIALOG_DATA]}]}]},H);function H(e,t){this.dialogRef=e,this.data=t,this.content=t.content,this.title=t.title,this.hasCancel=t.type==N.CONFIRMATION}var A=(F.prototype.openDialog=function(e,t,n){return this.dialog.open(k,{width:"250px",data:{title:t,content:n,type:e}}).afterClosed()},F.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],F.ctorParameters=function(){return[{type:g.MatDialog}]},F.ngInjectableDef=i.defineInjectable({factory:function(){return new F(i.inject(b.MatDialog))},token:F,providedIn:"root"}),F);function F(e){this.dialog=e}var j=(L.prototype.getTables=function(){return this.tables},L.prototype.updateDependency=function(e,t){if(void 0===t&&(t=!1),t&&(this.infoTables=this.infoTables.slice(0,e.order?e.order:0)),(!e.order||e.order>=this.infoTables.length)&&(e.order=this.infoTables.length),(this.infoTables[e.order]=e).isRemote){if((e.dataSource=null)===e.count)throw"hace falta el count"}else{if(null===e.dataSource)throw"hace falta el dataSource";e.count=e.dataSource.length}this.tables.next(this.infoTables)},L.prototype.setTotal=function(e){this.emitTotal.next(e)},L.prototype.addPage=function(e){this.emitNextPage.next(e)},L.decorators=[{type:i.Injectable}],L.ctorParameters=function(){return[]},L);function L(){this.tables=new n.Subject,this.infoTables=new Array,this.emitTotal=new n.Subject,this.emitNextPage=new n.Subject}var U=(q.prototype.setTotal=function(e,t){this.emitChangeSource.next({obj:e,table:t})},q.prototype.addPage=function(e,t){this.emitNextPage.next({obj:e,table:t})},q.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],q.ngInjectableDef=i.defineInjectable({factory:function(){return new q},token:q,providedIn:"root"}),q);function q(){this.emitChangeSource=new n.Subject,this.emitNextPage=new n.Subject,this.totalReturn=this.emitChangeSource.asObservable(),this.nextPageReturn=this.emitNextPage.asObservable()}var G=(V.prototype.ngOnInit=function(){var t=this;this.getTables(),this.dependencyTableHelisaService.emitNextPage.subscribe(function(e){t.tableService.addPage(e.data,t.viewTables.toArray()[e.index])}),this.dependencyTableHelisaService.emitTotal.subscribe(function(e){t.tableService.setTotal(e.data,t.viewTables[e.index])})},V.prototype.getService=function(){return this.dependencyTableHelisaService},V.prototype.getTables=function(){var t=this;this.dependencyTableHelisaService.getTables().subscribe(function(e){t.tables=e})},V.prototype.onSelectedDependency=function(e,t){this.selected.emit({index:e,data:t})},V.prototype.onNextPage=function(e,t){this.nextPage.emit({index:e,data:t})},V.prototype.onTotal=function(e,t){this.total.emit({index:e,data:t})},V.prototype.onSort=function(e,t){this.sort.emit({index:e,data:t})},V.decorators=[{type:i.Component,args:[{selector:"hel-dependency-table",template:'<div>\r\n  <hel-table #viewTables *ngFor="let table of tables; let i = index;" class="table-test" \r\n    [dataSource]="table.dataSource" [columnConfiguration]="table.columns" [isRemote]="table.isRemote" [count]="table.count"\r\n    (select)="onSelectedDependency(i, $event)"  (nextPage)="onNextPage(i, $event)" (total)="onTotal(i, $event)" (sort)="onSort(i, $event)">\r\n  </hel-table>\r\n</div>\r\n',providers:[j],styles:[""]}]}],V.ctorParameters=function(){return[{type:j},{type:U}]},V.propDecorators={viewTables:[{type:i.ViewChildren,args:["viewTables"]}],selected:[{type:i.Output}],nextPage:[{type:i.Output}],total:[{type:i.Output}],sort:[{type:i.Output}]},V);function V(e,t){this.dependencyTableHelisaService=e,this.tableService=t,this.tables=[],this.selected=new i.EventEmitter,this.nextPage=new i.EventEmitter,this.total=new i.EventEmitter,this.sort=new i.EventEmitter}var _=(B.prototype.ngOnInit=function(){},B.prototype.search=function(){this.setValue.emit(this.inputFormControl.value)},B.decorators=[{type:i.Component,args:[{selector:"hel-input",template:'<mat-form-field>\r\n  <input #inputText matInput placeholder="{{placeholder}}" (keyup.enter)="search()" [formControl]= "inputFormControl">\r\n  <mat-icon matSuffix (click)="search()" *ngIf="isSearch">search</mat-icon>\r\n</mat-form-field>\r\n',styles:[""]}]}],B.ctorParameters=function(){return[]},B.propDecorators={placeholder:[{type:i.Input}],setValue:[{type:i.Output}],isSearch:[{type:i.Input}],inputFormControl:[{type:i.Input}]},B);function B(){this.placeholder="",this.setValue=new i.EventEmitter,this.isSearch=!1,this.inputFormControl=new S.FormControl("")}var $={SUM:0,AVERAGE:1,COUNT:2};$[$.SUM]="SUM",$[$.AVERAGE]="AVERAGE",$[$.COUNT]="COUNT";var W={SORT:0,UNKNOWN:1,TOTAL:2};W[W.SORT]="SORT",W[W.UNKNOWN]="UNKNOWN",W[W.TOTAL]="TOTAL";var K={REMOTE:0,LOCAL:1};K[K.REMOTE]="REMOTE",K[K.LOCAL]="LOCAL";var Y=(z.getValue=function(e,t){return t.name.split(".").reduce(function(e,t){return e&&e[t]},e)},z);function z(){}var J=(Q.prototype.getBody=function(e,t){return{}},Q.prototype.nextPage=function(){return this.page++},Q);function Q(){this.page=0,this.isLastPage=!1,this.isUsed=!1}var X={GROUP_TITLE:0,GROUP_FOOTER:1,ROW:2};X[X.GROUP_TITLE]="GROUP_TITLE",X[X.GROUP_FOOTER]="GROUP_FOOTER",X[X.ROW]="ROW";var Z=(ee.prototype.ngOnInit=function(){var a=this;this.tableService.nextPageReturn.subscribe(function(e){e.table&&e.table!==a||a.receivePage(e.obj)}),this.tableService.totalReturn.subscribe(function(n){n&&a.columnConfig.forEach(function(e,t){e===n.obj.column&&(a.totalData[t]=a.getGroupValue(e,{sum:n.obj.value,count:a.count}))})}),this.matSort.sortChange.subscribe(function(t){var e=a.columnConfig.find(function(e){return e.name===t.active});e.sortDirection=t.direction,a.sort.emit({column:e,columnConfigurations:a.columnConfig,type:W.SORT})})},Object.defineProperty(ee.prototype,"isRemote",{set:function(e){this.type=e?K.REMOTE:K.LOCAL,this.type===K.REMOTE?(this.tableHelisaConnectComponent=new J,this.goNextPage()):this.tableHelisaConnectComponent=undefined},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"columnConfiguration",{set:function(e){var t=this;this.columnConfig=e,this.displayedColumns.splice(0,this.displayedColumns.length),e&&(e.forEach(function(e){e.visible&&t.displayedColumns.push(e.name)}),this.rawData&&(this.dataSource=this.rawData))},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"dataSource",{set:function(e){this.rawData=e,this.rawData&&this.prepareDataSource()},enumerable:!0,configurable:!0}),ee.prototype.prepareDataSource=function(){var t,o=this,n=Array(),a=!1;this.columnConfig.forEach(function(e){e.totalType!==undefined&&(o.type===K.LOCAL||o.tableHelisaConnectComponent.page<=1)&&(o.totalData=new Array(o.columnConfig.length),o.showFooter=!0,o.total.emit({column:e,columnConfigurations:o.columnConfig,type:W.TOTAL})),o.showSearch=o.showSearch||e.searchable,a=a||e.groupable}),a&&(this.rawData=this.rawData.sort(function(t,n){var a=0;return o.columnConfig.forEach(function(e){0===a&&(a=o.compare(t,n))}),a})),this.rawData.forEach(function(e){!a||0!==n.length&&0===o.compare(n[n.length-1].data,e)||(t&&n.push({data:t,rowType:X.GROUP_FOOTER}),n.push({data:e,rowType:X.GROUP_TITLE}),t=new Array(o.columnConfig.length)),a&&o.addTotalGroup(t,e),n.push({data:e,rowType:X.ROW})}),this.data=new g.MatTableDataSource(n),this.rawData&&this.rawData.length&&this.selectRow({data:this.rawData[0],rowType:X.ROW})},ee.prototype.addTotalGroup=function(n,a){this.columnConfig.forEach(function(e,t){e.totalType!==undefined&&(n[t]===undefined?n[t]={sum:Y.getValue(a,e),count:1}:(n[t].sum+=Y.getValue(a,e),n[t].count++))})},ee.prototype.compare=function(t,n){var a=0;return this.columnConfig.forEach(function(e){0===a&&e.groupable&&(Y.getValue(t,e)<Y.getValue(n,e)?a=-1:Y.getValue(t,e)>Y.getValue(n,e)&&(a=1))}),a},ee.prototype.getGroupDescription=function(t){var n="";return this.columnConfig.forEach(function(e){e.groupable&&(n+=(n.length?" - ":"")+Y.getValue(t,e))}),n},ee.prototype.isGroupTitle=function(e,t){return t.rowType===X.GROUP_TITLE},ee.prototype.isRow=function(e,t){return t.rowType===X.ROW},ee.prototype.isGroupFooter=function(e,t){return t.rowType===X.GROUP_FOOTER},ee.prototype.footerDisplayedColumns=function(){return this.displayedColumns.map(function(e){return"footer-"+e})},ee.prototype.getGroupValue=function(e,t){return e.totalType===$.SUM?t.sum:e.totalType===$.COUNT?t.count:e.totalType===$.AVERAGE?1*t.sum/t.count:undefined},ee.prototype.getValue=function(e,t){return Y.getValue(e,t)},ee.prototype.searchText=function(e){this.lastSearch=e,this.search.emit({text:e,columnConfigurations:this.columnConfig})},ee.prototype.selectRow=function(e){this.selectedObject=e.data,this.select.emit(this.selectedObject)},ee.prototype.onScroll=function(e){var t=e.target;t.scrollHeight-t.scrollTop<1e3&&this.goNextPage()},ee.prototype.goNextPage=function(){this.type!==K.REMOTE||this.tableHelisaConnectComponent.isLastPage||this.tableHelisaConnectComponent.isUsed||(this.tableHelisaConnectComponent.isUsed=!0,this.nextPage.emit({page:this.tableHelisaConnectComponent.nextPage(),body:this.tableHelisaConnectComponent.getBody(this.columnConfig,this.lastSearch)}))},ee.prototype.receivePage=function(e){this.rawData||(this.rawData=new Array),this.rawData=this.rawData.concat(e),this.dataSource=this.rawData,this.type===K.REMOTE&&(this.tableHelisaConnectComponent.isLastPage=0===e.length,this.tableHelisaConnectComponent.isUsed=!1)},ee.decorators=[{type:i.Component,args:[{selector:"hel-table",template:'<div class="div-table-helisa">\r\n  <hel-input (setValue)="searchText($event)" [isSearch]="true" *ngIf="showSearch"></hel-input>\r\n  <div class="container-table" (scroll)="onScroll($event)">\r\n    <table mat-table [dataSource]="data" class="table-helisa" matSort>\r\n      <ng-container [matColumnDef]="column.name" *ngFor="let column of columnConfig; let idx = index">\r\n        <div *ngIf="!column.sortable">\r\n          <th mat-header-cell *matHeaderCellDef > {{column.title}} </th>\r\n        </div>\r\n        <div *ngIf="column.sortable">\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column.title}} </th>\r\n        </div>\r\n        <td mat-cell *matCellDef="let element"> {{ getValue(element.data, column) }} </td>\r\n        <td mat-footer-cell *matFooterCellDef> <strong>{{ totalData[idx] }} </strong></td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef="groupHeader">\r\n        <td mat-cell *matCellDef="let group">\r\n          <strong>{{ getGroupDescription(group.data) }}</strong>\r\n        </td>\r\n      </ng-container>\r\n\r\n      <ng-container [matColumnDef]="\'footer-\'+column.name" *ngFor="let column of columnConfig; let i= index">\r\n        <td mat-cell *matCellDef="let element"> <strong>{{ getGroupValue(column, element.data[i]) }} </strong></td>\r\n      </ng-container>\r\n\r\n      <div *ngIf="showFooter">\r\n        <tr mat-footer-row *matFooterRowDef="displayedColumns;sticky:true"></tr>\r\n      </div>\r\n      <div *ngIf="showTitle">\r\n        <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>\r\n      </div>\r\n      <tr mat-row *matRowDef="let row; columns: displayedColumns; when: isRow" (click)="selectRow(row)" [class.selected-row]="row.data === selectedObject"></tr>\r\n      <tr mat-row *matRowDef="let row; columns: [\'groupHeader\']; when: isGroupTitle"></tr>\r\n      <tr mat-row *matRowDef="let row; columns: footerDisplayedColumns(); when: isGroupFooter"></tr>\r\n    </table>\r\n  </div>\r\n\r\n</div>\r\n',styles:[".div-table-helisa{height:500px;width:800px}.div-table-helisa .container-table{overflow:scroll;width:100%;height:100%}.div-table-helisa .container-table .table-helisa{width:100%}.div-table-helisa .container-table .table-helisa /deep/ tbody tr,.div-table-helisa .container-table .table-helisa /deep/ tfoot tr,.div-table-helisa .container-table .table-helisa /deep/ thead tr{height:26px}.div-table-helisa .container-table .table-helisa /deep/ tbody tr td,.div-table-helisa .container-table .table-helisa /deep/ tbody tr th,.div-table-helisa .container-table .table-helisa /deep/ tfoot tr td,.div-table-helisa .container-table .table-helisa /deep/ tfoot tr th,.div-table-helisa .container-table .table-helisa /deep/ thead tr td,.div-table-helisa .container-table .table-helisa /deep/ thead tr th{padding:2px 10px 0}.div-table-helisa .container-table .table-helisa /deep/ thead tr th{text-transform:uppercase;background:#579380;font-size:18px;color:#fff}.div-table-helisa .container-table .table-helisa /deep/ tbody tr{box-shadow:inset 0 1px 0 0 #b6b6b6}.div-table-helisa .container-table .table-helisa /deep/ tbody tr td{box-shadow:inset 1px 0 0 0 #b7b7b7;border:none}.div-table-helisa .container-table .table-helisa /deep/ tfoot tr td{box-shadow:inset 0 1px 0 0 #b7b7b7}.div-table-helisa .container-table .table-helisa .selected-row{font-weight:700;background:silver}"]}]}],ee.ctorParameters=function(){return[{type:U}]},ee.propDecorators={matSort:[{type:i.ViewChild,args:[g.MatSort]}],sort:[{type:i.Output}],total:[{type:i.Output}],search:[{type:i.Output}],select:[{type:i.Output}],nextPage:[{type:i.Output}],showTitle:[{type:i.Input}],count:[{type:i.Input}],isRemote:[{type:i.Input}],columnConfiguration:[{type:i.Input}],dataSource:[{type:i.Input}]},ee);function ee(e){this.tableService=e,this.displayedColumns=[],this.type=K.LOCAL,this.sort=new i.EventEmitter,this.total=new i.EventEmitter,this.search=new i.EventEmitter,this.select=new i.EventEmitter,this.nextPage=new i.EventEmitter,this.showTitle=!0,this.showFooter=!1,this.showSearch=!1}var te=(ne.prototype.ngOnInit=function(){},ne.decorators=[{type:i.Component,args:[{selector:"hel-date-helisa",template:'<div>\r\n<mat-form-field class="example-full-width">\r\n  <input matInput [matDatepicker]="picker" placeholder="Choose a date" [formControl]= "dateFormControl">\r\n  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>\r\n  <mat-datepicker touchUi #picker></mat-datepicker>\r\n</mat-form-field>\r\n</div>\r\n',styles:[""]}]}],ne.ctorParameters=function(){return[]},ne.propDecorators={dateFormControl:[{type:i.Input}]},ne);function ne(){this.dateFormControl=new S.FormControl("")}var ae=(oe.prototype.changeNodeSelected=function(e){this.emitNodeSelected.next(e)},oe.prototype.changeDataSource=function(e){this.emitDataSource.next(e)},oe.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],oe.ctorParameters=function(){return[]},oe.ngInjectableDef=i.defineInjectable({factory:function(){return new oe},token:oe,providedIn:"root"}),oe);function oe(){this.emitNodeSelected=new n.BehaviorSubject(1),this.nodeSelected=this.emitNodeSelected.asObservable(),this.emitDataSource=new n.BehaviorSubject(undefined),this.dataSourceObservable=this.emitDataSource.asObservable()}var re=(ie.prototype.nextPage=function(){return this.page=this.page+1},ie);function ie(){this.page=0,this.isLastPage=!1,this.isUsed=!1}var le=(se.prototype.ngOnInit=function(){var t=this;this.treeHelisaService.dataSourceObservable.subscribe(function(e){e&&e.children?t.receivePage(e.children):t.dataSource.data=[]}),this.treeHelisaService.nodeSelected.subscribe(function(e){t.data&&t.data.children&&t.selectNode(t.data,e)})},se.prototype.ngAfterViewInit=function(){},se.prototype.onRedirect=function(e){this.selectNode(this.data,e.id),e&&!e.children&&this.nodeSelected.emit(e.id)},se.prototype.onScroll=function(e){var t=e.target;t.offsetHeight+t.scrollTop>=t.scrollHeight&&this.goNextPage()},se.prototype.onEdit=function(e){e.isEditable=!0},se.prototype.onAdd=function(e){e.children||(e.children=[]),e.children.push({id:null,name:"",isSelected:!1,parent:e,isEditable:!0}),this.refreshTree()},se.prototype.onDelete=function(e){r.remove(e.parent.children,e),this.refreshTree(),this.removed.emit(e.id)},se.prototype.onEdited=function(e,t){e.name=t,null==e.id&&""==e.name?(r.remove(e.parent.children,e),this.refreshTree()):e.id&&null!=e.id&&""!==e.name.trim()?(this.edited.emit(e),e.isEditable=!1):e.id&&null==e.id&&""!==e.name.trim()&&(this.added.emit(e),e.isEditable=!1)},se.prototype.onCancel=function(e,t){null==e.id&&(r.remove(e.parent.children,e),this.refreshTree()),e.isEditable=!1},se.getDescription=function(e){var t=[e.name],n="";if(e.parent&&t.push(this.getDescription(e.parent)),1==t.length)return e.name;t=t.reverse();for(var a=0;a<t.length;a++)n=n+t[a]+(a==t.length-1?"":",");return n},se.prototype.refreshTree=function(){var e=this.dataSource.data;this.dataSource.data=null,this.dataSource.data=e},se.prototype.goNextPage=function(){this.treeHelisaConnect.isLastPage||this.treeHelisaConnect.isUsed||(this.treeHelisaConnect.isUsed=!0,this.rangeScrolled.emit({page:this.treeHelisaConnect.nextPage()}))},se.prototype.receivePage=function(e){var t=this;this.data||(this.data={id:null,name:"root",isSelected:!1}),this.data.children||(this.data.children=new Array,this.treeHelisaConnect=new re),this.data.children=this.data.children.concat(e),this.data.children.forEach(function(e){t.fillParent(e,t.data)}),this.dataSource.data=this.data.children,this.treeHelisaConnect.isLastPage=0===e.length,this.treeHelisaConnect.isUsed=!1},se.prototype.fillParent=function(t,e){var n=this;t.parent=e,t.children&&0<t.children.length&&t.children.forEach(function(e){n.fillParent(e,t)})},se.prototype.selectNode=function(e,t){if(this.upSelectNode(e),e.id==t)return e.isSelected=!0,e;if(null==e.children)return null;var n,a=null;for(n=0;null==a&&n<e.children.length;n++)a=this.selectNode(e.children[n],t);return a},se.prototype.upSelectNode=function(e){if(e.isSelected=!1,e.children)for(var t=0;t<e.children.length;t++)this.upSelectNode(e.children[t])},se.decorators=[{type:i.Component,args:[{selector:"hel-tree",template:'<div class="container-tree" (scroll)="onScroll($event)">\r\n<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">\r\n  \x3c!-- This is the tree node template for leaf nodes --\x3e\r\n  <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>\r\n    <li class="mat-tree-node" [ngStyle]="{\'color\': node.colorStyle}" [ngClass]="{\'isSelected\': node.isSelected}"\r\n    (click)="onRedirect(node)" *ngIf="!node.isEditable">\r\n      \x3c!-- use a disabled button to provide padding for tree leaf --\x3e\r\n      <button mat-icon-button disabled></button>\r\n      {{node.name}}\r\n    </li>\r\n    <li class="tree-options" *ngIf="showOptionsNode && !node.isEditable">\r\n        <button mat-icon-button (click)="onEdit(node)"><mat-icon>edit</mat-icon></button>\r\n        <button mat-icon-button (click)="onAdd(node)"><mat-icon>add</mat-icon></button>\r\n        <button mat-icon-button (click)="onDelete(node)"><mat-icon>delete</mat-icon></button>\r\n      </li>\r\n      <li class="tree-options" *ngIf="!!node.isEditable && node.isEditable">          \r\n          <hel-input-with-button [value]="node.name" (cancel)="onCancel(node,$event)" (done)="onEdited(node,$event)"></hel-input-with-button>\r\n      </li>\r\n  </mat-tree-node>\r\n  \x3c!-- This is the tree node template for expandable nodes --\x3e\r\n  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">\r\n    <li>\r\n      <div class="mat-tree-node tree-options"  *ngIf="!node.isEditable" \r\n      [ngStyle]="{\'color\': node.colorStyle}"\r\n      >\r\n        <button mat-icon-button matTreeNodeToggle\r\n                [attr.aria-label]="\'toggle \' + node.name">\r\n          <mat-icon class="mat-icon-rtl-mirror">\r\n            {{treeControl.isExpanded(node) ? \'expand_more\' : \'chevron_right\'}}\r\n          </mat-icon>\r\n        </button>\r\n        {{node.name}}        \r\n      </div>\r\n      <div class="tree-options">\r\n          <li class="tree-options" *ngIf="showOptionsNode && !node.isEditable">\r\n              <button mat-icon-button (click)="onEdit(node)"><mat-icon>edit</mat-icon></button>\r\n              <button mat-icon-button (click)="onAdd(node)"><mat-icon>add</mat-icon></button>\r\n              <button mat-icon-button (click)="onDelete(node)"><mat-icon>delete</mat-icon></button>\r\n            </li>\r\n            <li class="tree-options" *ngIf="!!node.isEditable && node.isEditable">\r\n                <hel-input-with-button [value]="node.name" (cancel)="onCancel(node,$event)" (done)="onEdited(node,$event)"></hel-input-with-button>\r\n            </li>\r\n      </div>\r\n      <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">\r\n        <ng-container matTreeNodeOutlet></ng-container>\r\n      </ul>\r\n    </li>       \r\n  </mat-nested-tree-node>\r\n</mat-tree>\r\n</div>\r\n',styles:[".example-tree-invisible{display:none}.example-tree li,.example-tree ul{margin-top:0;margin-bottom:0;list-style-type:none}.isSelected{background:red}.tree-options{display:inline}.container-tree{overflow:scroll;height:350px;width:100%}"]}]}],se.ctorParameters=function(){return[{type:ae},{type:o.Router}]},se.propDecorators={data:[{type:i.Input}],showOptionsNode:[{type:i.Input}],removed:[{type:i.Output}],edited:[{type:i.Output}],added:[{type:i.Output}],collapseParent:[{type:i.Output}],rangeScrolled:[{type:i.Output}],nodeSelected:[{type:i.Output}]},se);function se(e,t){if(this.treeHelisaService=e,this.router=t,this.showOptionsNode=!0,this.removed=new i.EventEmitter,this.edited=new i.EventEmitter,this.added=new i.EventEmitter,this.collapseParent=new i.EventEmitter,this.rangeScrolled=new i.EventEmitter,this.nodeSelected=new i.EventEmitter,this.treeControl=new a.NestedTreeControl(function(e){return e.children}),this.dataSource=new g.MatTreeNestedDataSource,this.hasChild=function(e,t){return!!t.children&&0<t.children.length},this.data){var n=this.data;this.data=null,this.receivePage(n.children)}else this.dataSource.data=[]}var ce=(de.decorators=[{type:i.NgModule,args:[{declarations:[E,D,k,G,_,Z,le,te],imports:[w.CommonModule,S.FormsModule,S.ReactiveFormsModule,g.MatButtonModule,g.MatCheckboxModule,l.MatToolbarModule,s.MatExpansionModule,c.MatFormFieldModule,g.MatInputModule,d.MatSelectModule,g.MatOptionModule,u.MatListModule,p.MatIconModule,g.MatSnackBarModule,h.MatCardModule,m.LayoutModule,l.MatToolbarModule,g.MatButtonModule,g.MatSidenavModule,p.MatIconModule,u.MatListModule,g.MatGridListModule,h.MatCardModule,g.MatMenuModule,g.MatInputModule,d.MatSelectModule,g.MatRadioModule,f.MatProgressSpinnerModule,g.MatTableModule,g.MatPaginatorModule,g.MatSortModule,b.MatDialogModule,y.MatTabsModule,v.MatDatepickerModule,g.MatNativeDateModule,M.MatStepperModule,C.MatChipsModule,T.DragDropModule,O.MatTreeModule],exports:[E,D,k,G,_,Z,le,te,g.MatButtonModule,g.MatCheckboxModule,l.MatToolbarModule,s.MatExpansionModule,c.MatFormFieldModule,g.MatInputModule,d.MatSelectModule,g.MatOptionModule,u.MatListModule,p.MatIconModule,g.MatSnackBarModule,h.MatCardModule,m.LayoutModule,l.MatToolbarModule,g.MatButtonModule,g.MatSidenavModule,p.MatIconModule,u.MatListModule,g.MatGridListModule,h.MatCardModule,g.MatMenuModule,g.MatInputModule,d.MatSelectModule,g.MatRadioModule,f.MatProgressSpinnerModule,g.MatTableModule,g.MatPaginatorModule,g.MatSortModule,b.MatDialogModule,y.MatTabsModule,v.MatDatepickerModule,g.MatNativeDateModule,M.MatStepperModule,C.MatChipsModule,T.DragDropModule,O.MatTreeModule],providers:[U,ae]}]}],de);function de(){}e.InputWithButtonComponent=E,e.ToastHelisaComponent=D,e.ToastHelisaService=R,e.ToastType={DONE:"DONE",ERROR:"ERROR",INFO:"INFO"},e.AlertHelisaType=N,e.AlertHelisaComponent=k,e.AlertHelisaService=A,e.DependencyTableHelisaComponent=G,e.DependencyTableHelisaService=j,e.InputHelisaComponent=_,e.TableHelisaComponent=Z,e.TotalType=$,e.ChangeColumnConfigurationType=W,e.TableHelisaType=K,e.ColumnConfigUtil=Y,e.TableHelisaService=U,e.DateHelisaComponent=te,e.TreeHelisaComponent=le,e.TreeHelisaConnect=re,e.TreeHelisaService=ae,e.TREE_COLOR_STYLE={NODE_RED:"red",NODE_GREEN:"green",NODE_PURPLE:"purple",NODE_GRAY:"gray"},e.HelisaLibModule=ce,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=helisa-lib.umd.min.js.map