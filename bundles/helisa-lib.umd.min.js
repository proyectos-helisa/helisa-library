!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/material/snack-bar"),require("lodash.clonedeep"),require("@angular/cdk/tree"),require("@angular/router"),require("lodash"),require("rxjs/operators"),require("rxjs"),require("@angular/core"),require("@angular/material"),require("@angular/material/toolbar"),require("@angular/material/expansion"),require("@angular/material/form-field"),require("@angular/material/select"),require("@angular/material/list"),require("@angular/material/icon"),require("@angular/material/card"),require("@angular/cdk/layout"),require("@angular/material/progress-spinner"),require("@angular/material/dialog"),require("@angular/material/tabs"),require("@angular/material/datepicker"),require("@angular/material/stepper"),require("@angular/material/chips"),require("@angular/cdk/drag-drop"),require("@angular/forms"),require("@angular/common"),require("@angular/material/tree")):"function"==typeof define&&define.amd?define("helisa-lib",["exports","@angular/material/snack-bar","lodash.clonedeep","@angular/cdk/tree","@angular/router","lodash","rxjs/operators","rxjs","@angular/core","@angular/material","@angular/material/toolbar","@angular/material/expansion","@angular/material/form-field","@angular/material/select","@angular/material/list","@angular/material/icon","@angular/material/card","@angular/cdk/layout","@angular/material/progress-spinner","@angular/material/dialog","@angular/material/tabs","@angular/material/datepicker","@angular/material/stepper","@angular/material/chips","@angular/cdk/drag-drop","@angular/forms","@angular/common","@angular/material/tree"],t):t(e["helisa-lib"]={},e.ng.material["snack-bar"],e.clonedeep,e.ng.cdk.tree,e.ng.router,e._,e.rxjs.operators,e.rxjs,e.ng.core,e.ng.material,e.ng.material.toolbar,e.ng.material.expansion,e.ng.material["form-field"],e.ng.material.select,e.ng.material.list,e.ng.material.icon,e.ng.material.card,e.ng.cdk.layout,e.ng.material["progress-spinner"],e.ng.material.dialog,e.ng.material.tabs,e.ng.material.datepicker,e.ng.material.stepper,e.ng.material.chips,e.ng.cdk["drag-drop"],e.ng.forms,e.ng.common,e.ng.material.tree)}(this,function(e,t,n,i,o,r,a,l,s,d,c,u,p,h,m,f,b,g,y,v,C,w,S,O,x,M,T,E){"use strict";n=n&&n.hasOwnProperty("default")?n["default"]:n;var N=(I.prototype.ngOnInit=function(){""!=this.value&&this.inputFormControl.setValue(this.value)},I.prototype.onDone=function(){this.inputFormControl.valid&&this.done.emit(this.inputFormControl.value)},I.prototype.onCancel=function(){this.cancel.emit()},I.decorators=[{type:s.Component,args:[{selector:"hel-input-with-button",template:'<div>\r\n  <mat-form-field>\r\n    <input matInput [placeholder]="placeholder" [formControl]= "inputFormControl">    \r\n    <mat-icon matSuffix (click)="onDone()">done</mat-icon>\r\n    <mat-icon matSuffix (click)="onCancel()">close</mat-icon>\r\n    <mat-error *ngIf="inputFormControl.hasError(\'required\')">\r\n      {{ requiredMessage }}\r\n    </mat-error>\r\n  </mat-form-field>\r\n</div>\r\n',styles:[""]}]}],I.ctorParameters=function(){return[]},I.propDecorators={placeholder:[{type:s.Input}],inputFormControl:[{type:s.Input}],requiredMessage:[{type:s.Input}],value:[{type:s.Input}],done:[{type:s.Output}],cancel:[{type:s.Output}]},I);function I(){this.placeholder="",this.inputFormControl=new M.FormControl("",M.Validators.required),this.requiredMessage="El campo es requerido",this.value="",this.done=new s.EventEmitter,this.cancel=new s.EventEmitter}var R=(D.prototype.ngOnInit=function(){},D.decorators=[{type:s.Component,args:[{selector:"hel-toast",template:'<div [ngClass]="\'toast-\'+data.type">\r\n  <span class="toast-message">{{ data.message }}</span>\r\n  <ng-container *ngIf="!!data && !!data.subMessages">\r\n    <span class="toast-sub-message" *ngFor="let submessage of data.subMessages">{{ submessage }}</span>\r\n  </ng-container>    \r\n</div>\r\n',styles:[""]}]}],D.ctorParameters=function(){return[{type:undefined,decorators:[{type:s.Inject,args:[d.MAT_SNACK_BAR_DATA]}]}]},D);function D(e){this.data=e}var k=(P.prototype.showToast=function(e,t,n){n=n||[],this.snackBar.openFromComponent(R,{data:{message:t,type:e,subMessages:n},duration:1e3*this.durationInSeconds})},P.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],P.ctorParameters=function(){return[{type:d.MatSnackBar}]},P.ngInjectableDef=s.defineInjectable({factory:function(){return new P(s.inject(t.MatSnackBar))},token:P,providedIn:"root"}),P);function P(e){this.snackBar=e,this.durationInSeconds=5}var A={ERROR:"ERROR",CONFIRMATION:"CONFIRMATION"},j=(H.prototype.ngOnInit=function(){},H.prototype.onCancel=function(){this.dialogRef.close()},H.decorators=[{type:s.Component,args:[{selector:"hel-alert",template:'<h1 mat-dialog-title>{{ title }}</h1>\r\n<div mat-dialog-content>\r\n  {{ content }}\r\n</div>\r\n<div mat-dialog-actions>\r\n    <button mat-button *ngIf="hasCancel" [mat-dialog-close]="false" >cancelar</button>\r\n    <button mat-button [mat-dialog-close]="true" cdkFocusInitial>aceptar</button>\r\n</div>',styles:[""]}]}],H.ctorParameters=function(){return[{type:d.MatDialogRef},{type:undefined,decorators:[{type:s.Inject,args:[d.MAT_DIALOG_DATA]}]}]},H);function H(e,t){this.dialogRef=e,this.data=t,this.content=t.content,this.title=t.title,this.hasCancel=t.type==A.CONFIRMATION}var B=(F.prototype.openDialog=function(e,t,n){return this.dialog.open(j,{width:"250px",data:{title:t,content:n,type:e}}).afterClosed()},F.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],F.ctorParameters=function(){return[{type:d.MatDialog}]},F.ngInjectableDef=s.defineInjectable({factory:function(){return new F(s.inject(v.MatDialog))},token:F,providedIn:"root"}),F);function F(e){this.dialog=e}var L=(V.prototype.getTables=function(){return this.tables},V.prototype.updateDependency=function(e,t){if(void 0===t&&(t=!1),t&&(this.infoTables=this.infoTables.slice(0,e.order?e.order:0)),(!e.order||e.order>=this.infoTables.length)&&(e.order=this.infoTables.length),(this.infoTables[e.order]=e).isRemote){if((e.dataSource=null)===e.count)throw"hace falta el count"}else{if(null===e.dataSource)throw"hace falta el dataSource";e.count=e.dataSource.length}this.tables.next(this.infoTables)},V.prototype.setTotal=function(e){this.emitTotal.next(e)},V.prototype.addPage=function(e){this.emitNextPage.next(e)},V.prototype.selectIndexRow=function(e){this.infoTables[e.order]&&(this.infoTables[e.order].indexRowSelect=e.indexRowSelect,this.tables.next(this.infoTables))},V.prototype.changeVisibilityButton=function(e){this.emitVisibilityButton$.next(e)},V.prototype.changeVisibilityAllButtons=function(e){this.emitVisibilityAllButtons$.next(e)},V.prototype.changeisCellSelection=function(e){this.emitIsCellSelection$.next(e)},V.prototype.changeColumnsByTable=function(e){this.emitChangeColumns$.next(e)},V.decorators=[{type:s.Injectable}],V.ctorParameters=function(){return[]},V);function V(){this.tables=new l.Subject,this.infoTables=new Array,this.emitVisibilityButton$=new l.Subject,this.emitVisibilityButton=this.emitVisibilityButton$.asObservable(),this.emitVisibilityAllButtons$=new l.Subject,this.emitVisibilityAllButtons=this.emitVisibilityAllButtons$.asObservable(),this.emitIsCellSelection$=new l.Subject,this.emitIsCellSelection=this.emitIsCellSelection$.asObservable(),this.emitChangeColumns$=new l.Subject,this.emitChangeColumns=this.emitChangeColumns$.asObservable(),this.emitTotal=new l.Subject,this.emitNextPage=new l.Subject}var U=($.prototype.setTotal=function(e,t){this.emitChangeSource.next({obj:e,table:t})},$.prototype.addPage=function(e,t){this.emitNextPage.next({obj:e,table:t})},$.prototype.changeVisibilityButton=function(e){this.emitVisibleButton$.next(e)},$.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],$.ngInjectableDef=s.defineInjectable({factory:function(){return new $},token:$,providedIn:"root"}),$);function $(){this.emitChangeSource=new l.Subject,this.emitNextPage=new l.Subject,this.totalReturn=this.emitChangeSource.asObservable(),this.nextPageReturn=this.emitNextPage.asObservable(),this.emitVisibleButton$=new l.Subject,this.emitVisibleButton=this.emitVisibleButton$.asObservable()}var q=(_.prototype.ngOnInit=function(){var n=this;this.getTables(),this.dependencyTableHelisaService.emitNextPage.subscribe(function(e){n.tableService.addPage(e.data,n.viewTables.toArray()[e.index])}),this.dependencyTableHelisaService.emitTotal.subscribe(function(e){n.tableService.setTotal(e.data,n.viewTables[e.index])}),this.dependencyTableHelisaService.emitVisibilityButton.subscribe(function(e){if(e&&e.index!=undefined){var t=n.tables[e.index];t&&(t.addRowButton.showButton=e.data)}}),this.dependencyTableHelisaService.emitVisibilityAllButtons.subscribe(function(t){t!=undefined&&null!=t&&n.tables.forEach(function(e){e.addRowButton&&(e.addRowButton.showButton=t)})}),this.dependencyTableHelisaService.emitIsCellSelection.subscribe(function(e){if(e&&e.index!=undefined){var t=n.tables[e.index];t&&(t.isCellSelection=e.data)}}),this.dependencyTableHelisaService.emitChangeColumns.subscribe(function(e){if(e&&e.index!=undefined){var t=n.tables[e.index];t&&(t.columns=e.data)}})},_.prototype.getService=function(){return this.dependencyTableHelisaService},_.prototype.getTables=function(){var t=this;this.dependencyTableHelisaService.getTables().subscribe(function(e){t.tables=e})},_.prototype.onSelectedDependency=function(e,t){this.selectedObject={index:e,data:t},this.selected.emit({index:e,data:t.value}),this.selectObject.emit({index:e,data:t})},_.prototype.onNextPage=function(e,t){this.nextPage.emit({index:e,data:t})},_.prototype.onTotal=function(e,t){this.total.emit({index:e,data:t})},_.prototype.onSort=function(e,t){this.sort.emit({index:e,data:t})},_.prototype.onDrop=function(e,t){this.drop.emit({index:e,data:t})},_.prototype.onAddRow=function(e){this.addRow.emit(e)},_.prototype.selectedCell=function(e,t){this.tables[e].isCellSelection&&this.selectCell.emit({index:e,data:t})},_.prototype.onBookClicked=function(e,t){this.bookClicked.emit({index:e,data:t})},_.decorators=[{type:s.Component,args:[{selector:"hel-dependency-table",template:'<div>    \r\n  <hel-table #viewTables *ngFor="let table of tables; let i = index;" class="table-test" \r\n    [dataSource]="table.dataSource" [columnConfiguration]="table.columns" [isRemote]="table.isRemote" [count]="table.count"\r\n    (selectObject)="onSelectedDependency(i, $event)" [selectedIndexRow]="table.indexRowSelect" (nextPage)="onNextPage(i, $event)"\r\n    (total)="onTotal(i, $event)" (sort)="onSort(i, $event)" [isDragged]="table.isDragged" (drop)="onDrop(i, $event)"\r\n    (addRow)="onAddRow(i)" [addRowButton]="table.addRowButton" [configRowStylesFromColumn]="table.configRowStylesFromColumn"\r\n    [isCellSelection]="table.isCellSelection" (selectCell)="selectedCell(i, $event)"\r\n    [addBookButton]="(table.addBookButton != null)?table.addBookButton:false"\r\n    (bookClicked)="onBookClicked(i,$event)">\r\n  </hel-table>\r\n</div>\r\n',providers:[L],styles:[""]}]}],_.ctorParameters=function(){return[{type:L},{type:U}]},_.propDecorators={viewTables:[{type:s.ViewChildren,args:["viewTables"]}],selected:[{type:s.Output}],selectObject:[{type:s.Output}],nextPage:[{type:s.Output}],total:[{type:s.Output}],sort:[{type:s.Output}],drop:[{type:s.Output}],addRow:[{type:s.Output}],selectCell:[{type:s.Output}],bookClicked:[{type:s.Output}]},_);function _(e,t){this.dependencyTableHelisaService=e,this.tableService=t,this.tables=[],this.selected=new s.EventEmitter,this.selectObject=new s.EventEmitter,this.nextPage=new s.EventEmitter,this.total=new s.EventEmitter,this.sort=new s.EventEmitter,this.drop=new s.EventEmitter,this.addRow=new s.EventEmitter,this.selectCell=new s.EventEmitter,this.bookClicked=new s.EventEmitter,this.selectedObject=null}var G=(W.prototype.ngOnInit=function(){this.isFocused&&this.nameInput.nativeElement.focus()},W.prototype.search=function(){this.setValue.emit(this.inputFormControl.value)},W.decorators=[{type:s.Component,args:[{selector:"hel-input",template:'<mat-form-field>\r\n  <input #inputText matInput placeholder="{{placeholder}}" \r\n  (keyup.enter)="search()" [formControl]= "inputFormControl"\r\n  [attr.disabled]="disabled ? \'disabled\' : null"\r\n  >\r\n  <mat-icon matSuffix (click)="search()" *ngIf="isSearch">search</mat-icon>\r\n</mat-form-field>\r\n',styles:[""]}]}],W.ctorParameters=function(){return[]},W.propDecorators={placeholder:[{type:s.Input}],setValue:[{type:s.Output}],isSearch:[{type:s.Input}],inputFormControl:[{type:s.Input}],isFocused:[{type:s.Input}],disabled:[{type:s.Input}],nameInput:[{type:s.ViewChild,args:["inputText"]}]},W);function W(){this.placeholder="",this.setValue=new s.EventEmitter,this.isSearch=!1,this.inputFormControl=new M.FormControl(""),this.isFocused=!1,this.disabled=!1}var K={USER:0,CODE_CALL:1};K[K.USER]="USER",K[K.CODE_CALL]="CODE_CALL";var z={SUM:0,AVERAGE:1,COUNT:2};z[z.SUM]="SUM",z[z.AVERAGE]="AVERAGE",z[z.COUNT]="COUNT";var J={SORT:0,UNKNOWN:1,TOTAL:2};J[J.SORT]="SORT",J[J.UNKNOWN]="UNKNOWN",J[J.TOTAL]="TOTAL";var Q={REMOTE:0,LOCAL:1};Q[Q.REMOTE]="REMOTE",Q[Q.LOCAL]="LOCAL";var X=(Y.getValue=function(e,t){return t.name.split(".").reduce(function(e,t){return e&&e[t]},e)},Y);function Y(){}var Z=(ee.prototype.getBody=function(e,t){return{}},ee.prototype.nextPage=function(){return this.page++},ee);function ee(){this.page=0,this.isLastPage=!1,this.isUsed=!1}var te={GROUP_TITLE:0,GROUP_FOOTER:1,ROW:2};te[te.GROUP_TITLE]="GROUP_TITLE",te[te.GROUP_FOOTER]="GROUP_FOOTER",te[te.ROW]="ROW";var ne=(oe.prototype.ngOnInit=function(){var o=this;this.tableService.nextPageReturn.subscribe(function(e){e.table&&e.table!==o||o.receivePage(e.obj)}),this.tableService.totalReturn.subscribe(function(n){n&&o.columnConfig.forEach(function(e,t){e===n.obj.column&&(o.totalData[t]=o.getGroupValue(e,{sum:n.obj.value,count:o.count}))})}),this.matSort.sortChange.subscribe(function(t){var e=o.columnConfig.find(function(e){return e.name===t.active});e.sortDirection=t.direction,o.sort.emit({column:e,columnConfigurations:o.columnConfig,type:J.SORT})}),this.tableService.emitVisibleButton.subscribe(function(e){e!=undefined&&null!=e&&(o.addRowButton.showButton=e)})},oe.prototype.ngAfterViewInit=function(){this.isCellSelection&&this.matTable.renderRows()},Object.defineProperty(oe.prototype,"isRemote",{set:function(e){this.type=e?Q.REMOTE:Q.LOCAL,this.type===Q.REMOTE?(this.tableHelisaConnectComponent=new Z,this.goNextPage()):this.tableHelisaConnectComponent=undefined},enumerable:!0,configurable:!0}),Object.defineProperty(oe.prototype,"columnConfiguration",{set:function(e){var t=this;this.columnConfig=e,this.displayedColumns.splice(0,this.displayedColumns.length),e&&(e.forEach(function(e){e.visible&&t.displayedColumns.push(e.name)}),this.rawData&&(this.dataSource=this.rawData))},enumerable:!0,configurable:!0}),Object.defineProperty(oe.prototype,"dataSource",{set:function(e){this.rawData=e,this.rawData&&this.prepareDataSource()},enumerable:!0,configurable:!0}),Object.defineProperty(oe.prototype,"selectedIndexRow",{set:function(e){this.indexRowSelect=e,this.rawData&&this.rawData.length&&((e>=this.rawData.length||e<0)&&(this.indexRowSelect=0),this.selectRow({data:this.rawData[this.indexRowSelect],rowType:te.ROW},!1))},enumerable:!0,configurable:!0}),oe.prototype.prepareDataSource=function(){var t,i=this,n=Array(),o=!1;this.columnConfig.forEach(function(e){e.totalType!==undefined&&(i.type===Q.LOCAL||i.tableHelisaConnectComponent.page<=1)&&(i.totalData=new Array(i.columnConfig.length),i.showFooter=!0,i.total.emit({column:e,columnConfigurations:i.columnConfig,type:J.TOTAL})),i.showSearch=i.showSearch||e.searchable,o=o||e.groupable}),o&&(this.rawData=this.rawData.sort(function(t,n){var o=0;return i.columnConfig.forEach(function(e){0===o&&(o=i.compare(t,n))}),o})),this.rawData.forEach(function(e){!o||0!==n.length&&0===i.compare(n[n.length-1].data,e)||(t&&n.push({data:t,rowType:te.GROUP_FOOTER}),n.push({data:e,rowType:te.GROUP_TITLE}),t=new Array(i.columnConfig.length)),o&&i.addTotalGroup(t,e),n.push({data:e,rowType:te.ROW})}),this.data=new d.MatTableDataSource(n),this.rawData&&this.rawData.length&&this.indexRowSelect&&!this.selectedObject&&((this.indexRowSelect>=this.rawData.length||this.indexRowSelect<0)&&(this.indexRowSelect=0),this.selectRow({data:this.rawData[this.indexRowSelect],rowType:te.ROW},!1))},oe.prototype.addTotalGroup=function(n,o){this.columnConfig.forEach(function(e,t){e.totalType!==undefined&&(n[t]===undefined?n[t]={sum:X.getValue(o,e),count:1}:(n[t].sum+=X.getValue(o,e),n[t].count++))})},oe.prototype.compare=function(t,n){var o=0;return this.columnConfig.forEach(function(e){0===o&&e.groupable&&(X.getValue(t,e)<X.getValue(n,e)?o=-1:X.getValue(t,e)>X.getValue(n,e)&&(o=1))}),o},oe.prototype.getGroupDescription=function(t){var n="";return this.columnConfig.forEach(function(e){e.groupable&&(n+=(n.length?" - ":"")+X.getValue(t,e))}),n},oe.prototype.isGroupTitle=function(e,t){return t.rowType===te.GROUP_TITLE},oe.prototype.isRow=function(e,t){return t.rowType===te.ROW},oe.prototype.isGroupFooter=function(e,t){return t.rowType===te.GROUP_FOOTER},oe.prototype.footerDisplayedColumns=function(){return this.displayedColumns.map(function(e){return"footer-"+e})},oe.prototype.getGroupValue=function(e,t){return e.totalType===z.SUM?t.sum:e.totalType===z.COUNT?t.count:e.totalType===z.AVERAGE?1*t.sum/t.count:undefined},oe.prototype.getValue=function(e,t){return X.getValue(e,t)},oe.prototype.searchText=function(e){this.lastSearch=e,this.search.emit({text:e,columnConfigurations:this.columnConfig})},oe.prototype.selectRow=function(e,t){this.selectedObject=e.data,this.select.emit(this.selectedObject),this.selectObject.emit({value:this.selectedObject,scope:t?K.USER:K.CODE_CALL})},oe.prototype.onScroll=function(e){var t=e.target;t.scrollHeight-t.scrollTop<1e3&&this.goNextPage()},oe.prototype.goNextPage=function(){this.type!==Q.REMOTE||this.tableHelisaConnectComponent.isLastPage||this.tableHelisaConnectComponent.isUsed||(this.tableHelisaConnectComponent.isUsed=!0,this.nextPage.emit({page:this.tableHelisaConnectComponent.nextPage(),body:this.tableHelisaConnectComponent.getBody(this.columnConfig,this.lastSearch)}))},oe.prototype.receivePage=function(e){this.rawData||(this.rawData=new Array),this.rawData=this.rawData.concat(e),this.dataSource=this.rawData,this.type===Q.REMOTE&&(this.tableHelisaConnectComponent.isLastPage=0===e.length,this.tableHelisaConnectComponent.isUsed=!1)},oe.prototype.dblClickCell=function(){this.selectCell.emit(this.selectedCells)},oe.prototype.selectedCell=function(e,t){this.selectedCells={column:t,row:e},this.selectCell.emit(this.selectedCells)},oe.prototype.isSelectedCell=function(e,t){return!(!this.isCellSelection||null==this.selectedCells||this.selectedCells.column.name!==t.name||this.selectedCells.row.data!==e.data)},oe.prototype.getClassToCell=function(t,n){var o=this,e="";if(this.configCellStyles){var i=this.configCellStyles.find(function(e){return e.cellData===o.getValue(t,n)});i&&(e=i.classCell)}return e},oe.prototype.getClassToRow=function(t){var n=this,e="";if(this.configRowStylesFromColumn){var o=this.configRowStylesFromColumn.find(function(e){return e.data===n.getValue(t,e.column)});o&&(e=o.classRow)}return e},oe.prototype.onDrop=function(e){var t=this.data.data;x.moveItemInArray(t,e.previousIndex,e.currentIndex),this.drop.emit({value:t[e.currentIndex].data,order:e.currentIndex}),this.data.data=n(t)},oe.prototype.tableKeydown=function(e){var t=this;if(!this.isCellSelection){var n=this.data.data.findIndex(function(e){return e.data===t.selectedObject}),o=-10;"ArrowDown"===e.key&&(this.scrollCount++,this.data.data.forEach(function(e,t){-10==o&&n<t&&e.rowType==te.ROW&&(o=t)})),"ArrowUp"===e.key&&(this.scrollCount--,n=this.data.data.length-n-1,this.data.data.reverse().forEach(function(e,t){-10==o&&n<t&&e.rowType==te.ROW&&(o=t)}),this.data.data.reverse(),-10!=o&&(o=this.data.data.length-o-1)),-10!=o&&(this.selectedObject=this.data.data[o].data),2<=Math.abs(this.scrollCount)?this.scrollCount=0:e.preventDefault()}},oe.prototype.onAddRow=function(){this.addRow.emit()},oe.prototype.onBookClicked=function(e){this.bookClicked.emit(e)},oe.decorators=[{type:s.Component,args:[{selector:"hel-table",template:'\r\n<button *ngIf="!!addRowButton && addRowButton.showButton" (click)="onAddRow()">{{addRowButton.text}}</button>\r\n<div class="div-table-helisa">\r\n  <hel-input (setValue)="searchText($event)" [isSearch]="true" *ngIf="showSearch"></hel-input>\r\n  <div class="container-table" (scroll)="onScroll($event)">\r\n      <ng-container *ngIf="addBookButton">\r\n          <div class="buttons-container">\r\n              <div *ngFor="let item of rawData">   \r\n                  <button mat-icon-button *ngIf="item === selectedObject" (click)="onBookClicked(selectedObject)">\r\n                      <mat-icon>import_contacts</mat-icon>\r\n                  </button>\r\n              </div>\r\n          </div>\r\n        </ng-container>\r\n    <table cdkDropList (cdkDropListDropped)="onDrop($event)" mat-table [dataSource]="data" class="table-helisa" matSort\r\n      matTable (keydown)="tableKeydown($event)" tabindex="0" >\r\n      <ng-container [matColumnDef]="column.name" *ngFor="let column of columnConfig; let idx = index">\r\n        <div *ngIf="!column.sortable">\r\n          <th mat-header-cell *matHeaderCellDef> {{column.title}} </th>\r\n        </div>\r\n        <div *ngIf="column.sortable">\r\n          <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column.title}} </th>\r\n        </div>\r\n        <td mat-cell *matCellDef="let element" (dblclick)="dblClickCell()" (click)="selectedCell(element, column)"\r\n          [class.selected-row]="isSelectedCell(element, column)" [ngClass]="getClassToCell(element.data, column)">\r\n          {{ getValue(element.data, column) }}          \r\n        </td>       \r\n        <td mat-footer-cell *matFooterCellDef> <strong>{{ totalData[idx] }} </strong></td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef="groupHeader">\r\n        <td mat-cell *matCellDef="let group">\r\n          <strong>{{ getGroupDescription(group.data) }}</strong>\r\n        </td>\r\n      </ng-container>\r\n\r\n      <ng-container [matColumnDef]="\'footer-\'+column.name" *ngFor="let column of columnConfig; let i= index">\r\n        <td mat-cell *matCellDef="let element"> <strong>{{ getGroupValue(column, element.data[i]) }} </strong></td>\r\n      </ng-container>\r\n\r\n      <div *ngIf="showFooter">\r\n        <tr mat-footer-row *matFooterRowDef="displayedColumns;sticky:true"></tr>\r\n      </div>\r\n      <div *ngIf="showTitle">\r\n        <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>\r\n      </div>\r\n      <div *ngIf="isDragged">\r\n        <tr cdkDrag [cdkDragData]="row" mat-row *matRowDef="let row; columns: displayedColumns; when: isRow"\r\n          (click)="selectRow(row, true)" [class.selected-row]="row.data === selectedObject && !isCellSelection"\r\n          [ngClass]="getClassToRow(row.data)"></tr>\r\n      </div>\r\n      <div *ngIf="!isDragged">\r\n        <tr mat-row *matRowDef="let row; columns: displayedColumns; when: isRow" (click)="selectRow(row, true)"\r\n          [class.selected-row]="row.data === selectedObject && !isCellSelection" [ngClass]="getClassToRow(row.data)"></tr>\r\n      </div>     \r\n      <tr mat-row *matRowDef="let row; columns: [\'groupHeader\']; when: isGroupTitle"></tr>\r\n      <tr mat-row *matRowDef="let row; columns: footerDisplayedColumns(); when: isGroupFooter"></tr>\r\n    </table>\r\n   \r\n    \r\n  </div>\r\n</div>\r\n',styles:["/deep/ hel-table{position:relative}/deep/ hel-table>button{justify-content:center;align-items:flex-start;background:0 0;position:absolute;color:transparent;overflow:hidden;cursor:pointer;display:flex;border:none;height:26px;z-index:101;width:20px;opacity:.5;right:0;top:0}/deep/ hel-table>button:focus{outline:0}/deep/ hel-table>button:hover{opacity:1}/deep/ hel-table>button:before{justify-content:center;align-items:center;position:absolute;font-size:20px;display:flex;content:'+';color:#fff;height:26px;width:20px}/deep/ hel-table>button+.div-table-helisa .container-table .table-helisa thead tr th:last-child{padding-right:20px}/deep/ hel-table .buttons-container{padding-top:26px;order:2}/deep/ hel-table .buttons-container>div{height:26px}/deep/ hel-table .buttons-container>div button{justify-content:center;align-items:center;display:flex;height:26px}/deep/ hel-table .buttons-container>div button>*{display:flex;height:100%}/deep/ hel-table .div-table-helisa .container-table{display:flex;height:100%;width:100%}/deep/ hel-table .div-table-helisa .container-table .table-helisa{width:100%}/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tbody tr,/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tfoot tr,/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ thead tr{height:26px}/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tbody tr td,/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tbody tr th,/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tfoot tr td,/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tfoot tr th,/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ thead tr td,/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ thead tr th{padding:2px 10px 0}/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ thead tr th{text-transform:uppercase;background:#579380;font-size:18px;color:#fff}/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tbody tr{box-shadow:inset 0 1px 0 0 #b6b6b6}/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tbody tr td{box-shadow:inset 1px 0 0 0 #b7b7b7;border:none}/deep/ hel-table .div-table-helisa .container-table .table-helisa /deep/ tfoot tr td{box-shadow:inset 0 1px 0 0 #b7b7b7}/deep/ hel-table .div-table-helisa .container-table .table-helisa .selected-row{font-weight:700;background:silver}"]}]}],oe.ctorParameters=function(){return[{type:U}]},oe.propDecorators={matSort:[{type:s.ViewChild,args:[d.MatSort]}],matTable:[{type:s.ViewChild,args:[d.MatTable]}],sort:[{type:s.Output}],total:[{type:s.Output}],search:[{type:s.Output}],select:[{type:s.Output}],selectCell:[{type:s.Output}],selectObject:[{type:s.Output}],nextPage:[{type:s.Output}],showTitle:[{type:s.Input}],isCellSelection:[{type:s.Input}],count:[{type:s.Input}],configCellStyles:[{type:s.Input}],configRowStylesFromColumn:[{type:s.Input}],selectedCells:[{type:s.Input}],drop:[{type:s.Output}],isDragged:[{type:s.Input}],addRowButton:[{type:s.Input}],addRow:[{type:s.Output}],bookClicked:[{type:s.Output}],addBookButton:[{type:s.Input}],isRemote:[{type:s.Input}],columnConfiguration:[{type:s.Input}],dataSource:[{type:s.Input}],selectedIndexRow:[{type:s.Input}]},oe);function oe(e){this.tableService=e,this.displayedColumns=[],this.type=Q.LOCAL,this.isSetSelectedRow=!1,this.scrollCount=0,this.sort=new s.EventEmitter,this.total=new s.EventEmitter,this.search=new s.EventEmitter,this.select=new s.EventEmitter,this.selectCell=new s.EventEmitter,this.selectObject=new s.EventEmitter,this.nextPage=new s.EventEmitter,this.showTitle=!0,this.isCellSelection=!1,this.drop=new s.EventEmitter,this.isDragged=!1,this.addRowButton={showButton:!1,text:""},this.addRow=new s.EventEmitter,this.bookClicked=new s.EventEmitter,this.addBookButton=!1,this.showFooter=!1,this.showSearch=!1}var ie=(re.prototype.ngOnInit=function(){},re.decorators=[{type:s.Component,args:[{selector:"hel-date-helisa",template:'<div>\r\n<mat-form-field class="example-full-width">\r\n  <input matInput [matDatepicker]="picker" [formControl]= "dateFormControl">\r\n  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>\r\n  <mat-datepicker touchUi #picker></mat-datepicker>\r\n</mat-form-field>\r\n</div>\r\n',styles:[""]}]}],re.ctorParameters=function(){return[]},re.propDecorators={placeholder:[{type:s.Input}],dateFormControl:[{type:s.Input}]},re);function re(){this.placeholder="",this.dateFormControl=new M.FormControl("")}function ae(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(o=r.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=r["return"])&&n.call(r)}finally{if(i)throw i.error}}return a}function le(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ae(arguments[t]));return e}var se=(de.prototype.changeNodeSelected=function(e){this.emitNodeSelected.next(e)},de.prototype.changeDataSource=function(e){this.emitDataSource.next(e)},de.prototype.expandAllNodes=function(e){this.emitExpandAllNodes.next(e)},de.prototype.collapseAllNodes=function(e){this.emitCollapseAllNodes.next(e)},de.prototype.refreshTree=function(){this.emitRefreshTree.next()},de.prototype.refreshTreeWithPagination=function(){this.emitRefreshTreeWithPagination.next()},de.prototype.expandOneNode=function(e){this.emitExpandOneNode.next(e)},de.prototype.collapseOneNode=function(e){this.emitCollapseOneNode.next(e)},de.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],de.ctorParameters=function(){return[]},de.ngInjectableDef=s.defineInjectable({factory:function(){return new de},token:de,providedIn:"root"}),de);function de(){this.emitNodeSelected=new l.BehaviorSubject(1),this.nodeSelected=this.emitNodeSelected.asObservable(),this.emitDataSource=new l.BehaviorSubject(undefined),this.dataSourceObservable=this.emitDataSource.asObservable(),this.emitExpandAllNodes=new l.BehaviorSubject(null),this.nodeExpand=this.emitExpandAllNodes.asObservable(),this.emitCollapseAllNodes=new l.BehaviorSubject(null),this.nodeCollapse=this.emitCollapseAllNodes.asObservable(),this.emitRefreshTree=new l.Subject,this.refreshTreeObservable=this.emitRefreshTree.asObservable(),this.emitRefreshTreeWithPagination=new l.Subject,this.refreshTreeWithPaginationObservable=this.emitRefreshTreeWithPagination.asObservable(),this.emitExpandOneNode=new l.Subject,this.expandOneNodeObservable=this.emitExpandOneNode.asObservable(),this.emitCollapseOneNode=new l.Subject,this.collapseOneNodeObservable=this.emitCollapseOneNode.asObservable()}var ce=(ue.prototype.nextPage=function(){return this.page=this.page+1},ue);function ue(){this.page=0,this.isLastPage=!1,this.isUsed=!1}var pe=(he.prototype.ngOnInit=function(){var t=this;this.treeHelisaService.dataSourceObservable.subscribe(function(e){e&&e.children?t.receivePage(e.children):(t.dataSource.data=[],t.treeControl.dataNodes=[])}),this.treeHelisaService.nodeSelected.subscribe(function(e){t.data&&t.data.children&&t.selectNode(t.data,e)}),this.treeHelisaService.refreshTreeObservable.subscribe(function(e){t.refreshTree()}),this.treeHelisaService.refreshTreeWithPaginationObservable.subscribe(function(e){t.refreshTreeWithPagination()})},he.prototype.ngAfterViewInit=function(){var t=this;this.treeHelisaService.nodeExpand.subscribe(function(e){null!=e&&e&&t.tree.treeControl.expandAll()}),this.treeHelisaService.nodeCollapse.subscribe(function(e){null!=e&&e&&t.tree.treeControl.collapseAll()}),this.treeHelisaService.expandOneNodeObservable.subscribe(function(e){e!=undefined&&t.treeControl.expand(e)}),this.treeHelisaService.collapseOneNodeObservable.subscribe(function(e){e!=undefined&&t.treeControl.collapse(e)})},he.prototype.onRedirect=function(e){var t=this;this.isSingleClick=!0,setTimeout(function(){t.isSingleClick&&(t.selectNode(t.data,e.id),e&&(t.nodeSelected.emit(e.id),t.currentNode=e))},350)},he.prototype.onScroll=function(e){var t=e.target;t.offsetHeight+t.scrollTop>=t.scrollHeight&&this.goNextPage()},he.prototype.onEdit=function(e){e.isEditable=!0},he.prototype.onAdd=function(e){e.children||(e.children=[]),e.children.push({id:null,name:"",isSelected:!1,parent:e,isEditable:!0}),this.refreshTree()},he.prototype.onDelete=function(e){r.remove(e.parent.children,e),this.refreshTree(),this.removed.emit(e.id)},he.prototype.onEdited=function(e,t){e.name=t,null==e.id&&""==e.name?(r.remove(e.parent.children,e),this.refreshTree()):e.id&&null!=e.id&&""!==e.name.trim()?(this.edited.emit(e),e.isEditable=!1):e.id&&null==e.id&&""!==e.name.trim()&&(this.added.emit(e),e.isEditable=!1)},he.prototype.onCancel=function(e,t){null==e.id&&(r.remove(e.parent.children,e),this.refreshTree()),e.isEditable=!1},he.prototype.onDblClick=function(e){this.isSingleClick=!1,this.dobleClick.emit(e.id)},he.prototype.onKeyDown=function(e){switch(e.key){case"Delete":this.keypressDelete.emit(this.currentNode&&this.currentNode.id?this.currentNode.id:null);break;case"Insert":this.keypressInsert.emit(this.currentNode&&this.currentNode.id?this.currentNode.id:null);break;case"ArrowDown":this.moveDownIntoTree();break;case"ArrowUp":this.moveUpIntoTree()}},he.prototype.moveUpIntoTree=function(){if(this.data)if(null==this.currentNode)this.selectNode(this.data,this.data.children[0].id),this.currentNode=this.data.children[0],this.currentNode.children&&0<this.currentNode.children.length&&this.treeHelisaService.expandOneNode(this.currentNode);else if(this.currentNode.parent&&null!=this.currentNode.id){var e=this.currentNode.parent.children.indexOf(this.currentNode);if(null==this.currentNode.parent.id&&0==e)return 0;e!=undefined&&0==e?this.currentNode=this.currentNode.parent:this.currentNode=this.currentNode.parent.children[e-1],this.selectNode(this.data,this.currentNode.id),this.currentNode.children&&0<this.currentNode.children.length&&this.treeHelisaService.expandOneNode(this.currentNode)}},he.prototype.moveDownIntoTree=function(){if(this.data)if(null==this.currentNode)this.selectNode(this.data,this.data.children[0].id),this.currentNode=this.data.children[0],this.currentNode.children&&0<this.currentNode.children.length&&this.treeHelisaService.expandOneNode(this.currentNode);else if(this.currentNode){var e=this.currentNode&&this.currentNode.parent?this.currentNode.parent.children.indexOf(this.currentNode):null;if(this.currentNode.children&&0<this.currentNode.children.length)this.currentNode=this.currentNode.children[0],this.selectNode(this.data,this.currentNode.id),this.currentNode.children&&0<this.currentNode.children.length&&this.treeHelisaService.expandOneNode(this.currentNode);else if(e!=undefined&&e==this.currentNode.parent.children.length-1&&null!=this.currentNode.parent.parent&&null!=this.currentNode.parent.parent.children&&0<this.currentNode.parent.parent.children.length){var t=this.currentNode.parent.parent.children.indexOf(this.currentNode.parent);this.currentNode=this.currentNode.parent.parent.children[t+1]==undefined?this.currentNode:this.currentNode.parent.parent.children[t+1],this.selectNode(this.data,this.currentNode.id),this.currentNode.children&&0<this.currentNode.children.length&&this.treeHelisaService.expandOneNode(this.currentNode)}else this.currentNode=this.currentNode.parent.children[e+1],this.selectNode(this.data,this.currentNode.id),this.currentNode.children&&0<this.currentNode.children.length&&this.treeHelisaService.expandOneNode(this.currentNode)}},he.getDescription=function(e){var t=[e.name],n="";if(e.parent&&t.push(this.getDescription(e.parent)),1==t.length)return e.name;t=t.reverse();for(var o=0;o<t.length;o++)n=n+t[o]+(o==t.length-1?"":",");return n},he.prototype.refreshTree=function(){this.data=null;var e=this.dataSource.data;this.dataSource.data=null,this.dataSource.data=e,this.treeControl.dataNodes=e},he.prototype.refreshTreeWithPagination=function(){var e=this.dataSource.data;this.dataSource.data=null,this.dataSource.data=e,this.treeControl.dataNodes=e},he.prototype.goNextPage=function(){this.treeHelisaConnect.isLastPage||this.treeHelisaConnect.isUsed||(this.treeHelisaConnect.isUsed=!0,this.rangeScrolled.emit({page:this.treeHelisaConnect.nextPage()}))},he.prototype.receivePage=function(e){var t=this;this.data||(this.data={id:null,name:"root",isSelected:!1}),this.data.children||(this.data.children=new Array,this.treeHelisaConnect=new ce),this.data.children=this.data.children.concat(e),this.data.children.forEach(function(e){t.fillParent(e,t.data)}),this.dataSource.data=this.data.children,this.treeControl.dataNodes=this.data.children,this.treeHelisaConnect.isLastPage=0===e.length,this.treeHelisaConnect.isUsed=!1},he.prototype.fillParent=function(t,e){var n=this;t.parent=e,t.children&&0<t.children.length&&t.children.forEach(function(e){n.fillParent(e,t)})},he.prototype.selectNode=function(e,t){if(this.upSelectNode(e),e==undefined||e.id==undefined)return null;if(e.id==t)return e.isSelected=!0,this.expandAllParents(e),e;if(null==e.children)return null;var n,o=null;for(n=0;null==o&&n<e.children.length;n++)o=this.selectNode(e.children[n],t);return o},he.prototype.expandAllParents=function(e){e&&e.parent&&(this.treeHelisaService.expandOneNode(e.parent),this.expandAllParents(e.parent))},he.prototype.upSelectNode=function(e){if(e&&e.isSelected!=undefined&&(e.isSelected=!1,e.children))for(var t=0;t<e.children.length;t++)this.upSelectNode(e.children[t])},he.prototype.getClassNode=function(e){var t=[];return e.isSelected&&t.push("isSelected"),e.classNode&&t.push(e.classNode),t},he.prototype.onEditMode=function(e,t){this.getSelectedOptions(e).editMode=t},he.prototype.onSelectOption=function(e,t){t.isCheckedOption=e.source.selected,t.isCheckedOption?this.checkedOptionNode.emit(t.id):this.uncheckedOptionNode.emit(t.id)},he.prototype.getSelectedOptions=function(e){return this.selectedOptions.has(e.id)?this.reloadSelectedOptions(e,this.selectedOptions.get(e.id).editMode):this.reloadSelectedOptions(e,!1),this.selectedOptions.get(e.id)},he.prototype.reloadSelectedOptions=function(e,t){var n=new Array;e.options.forEach(function(e){e.isCheckedOption&&n.push(e.id)});var o={formControl:new M.FormControl(n),editMode:t};this.selectedOptions.set(e.id,o)},he.prototype.getNodeById=function(e){for(var t=le(this.dataSource.data);0<t.length;){var n=t.shift();if(n.id===e)return n;n.children&&t.push.apply(t,le(n.children))}return null},he.decorators=[{type:s.Component,args:[{selector:"hel-tree",template:'<div class="container-tree" (scroll)="onScroll($event)">\r\n  <mat-tree #tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">\r\n    \x3c!-- This is the tree node template for leaf nodes --\x3e\r\n    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>\r\n      <li class="mat-tree-node" [ngClass]="getClassNode(node)"\r\n          (click)="onRedirect(node)" (dblclick)="onDblClick(node)" *ngIf="!node.isEditable" class="tree-node">\r\n        \x3c!-- use a disabled button to provide padding for tree leaf --\x3e\r\n        <button mat-icon-button disabled></button>\r\n        {{node.name}}\r\n      </li>\r\n      <li class="tree-options" *ngIf="showOptionsNode && !node.isEditable">\r\n        <button mat-icon-button (click)="onEdit(node)">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n        <button mat-icon-button (click)="onAdd(node)">\r\n          <mat-icon>add</mat-icon>\r\n        </button>\r\n        <button mat-icon-button (click)="onDelete(node)">\r\n          <mat-icon>delete</mat-icon>\r\n        </button>\r\n\r\n      </li>\r\n      <div *ngIf="node.options && node.options.length" class="tree-options">\r\n        <button mat-icon-button *ngIf="!getSelectedOptions(node).editMode" (click)="onEditMode(node, true)">\r\n          <mat-icon>more_vert</mat-icon>\r\n        </button>\r\n        <mat-form-field *ngIf="getSelectedOptions(node).editMode">\r\n          <mat-select multiple [formControl]="getSelectedOptions(node).formControl">\r\n            <mat-option *ngFor="let option of node.options" [value]="option.id"\r\n                        (onSelectionChange)="onSelectOption($event, option)">{{option.name}}</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n        <button mat-icon-button *ngIf="getSelectedOptions(node).editMode" (click)="onEditMode(node, false)">\r\n          <mat-icon>done</mat-icon>\r\n        </button>\r\n      </div>\r\n\r\n\r\n      <li class="tree-options" *ngIf="!!node.isEditable && node.isEditable">\r\n        <hel-input-with-button [value]="node.name" (cancel)="onCancel(node,$event)"\r\n                               (done)="onEdited(node,$event)"></hel-input-with-button>\r\n      </li>\r\n    </mat-tree-node>\r\n    \x3c!-- This is the tree node template for expandable nodes --\x3e\r\n    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild" id="nested">\r\n      <li>\r\n        <div class="mat-tree-node tree-options tree-node" *ngIf="!node.isEditable">\r\n\r\n          <button mat-icon-button matTreeNodeToggle\r\n                  [attr.aria-label]="\'toggle \' + node.name">\r\n            <mat-icon class="mat-icon-rtl-mirror">\r\n              {{treeControl.isExpanded(node) ? \'remove\' : \'add\'}}\r\n            </mat-icon>\r\n          </button>\r\n          <p class="tree-node-text" (click)="onRedirect(node)" (dblclick)="onDblClick(node)"\r\n             [ngClass]="getClassNode(node)">{{node.name}}</p>\r\n        </div>\r\n        <div class="tree-options">\r\n      <li class="tree-options" *ngIf="showOptionsNode && !node.isEditable">\r\n        <button mat-icon-button (click)="onEdit(node)">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n        <button mat-icon-button (click)="onAdd(node)">\r\n          <mat-icon>add</mat-icon>\r\n        </button>\r\n        <button mat-icon-button (click)="onDelete(node)">\r\n          <mat-icon>delete</mat-icon>\r\n        </button>\r\n      </li>\r\n      <div *ngIf="node.options && node.options.length" class="tree-options">\r\n        <button mat-icon-button *ngIf="!getSelectedOptions(node).editMode" (click)="onEditMode(node, true)">\r\n          <mat-icon>more_vert</mat-icon>\r\n        </button>\r\n        <mat-form-field *ngIf="getSelectedOptions(node).editMode">\r\n          <mat-select multiple [formControl]="getSelectedOptions(node).formControl">\r\n            <mat-option *ngFor="let option of node.options" [value]="option.id"\r\n                        (onSelectionChange)="onSelectOption($event, option)">{{option.name}}</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n        <button mat-icon-button *ngIf="getSelectedOptions(node).editMode" (click)="onEditMode(node, false)">\r\n          <mat-icon>done</mat-icon>\r\n        </button>\r\n      </div>\r\n      <li class="tree-options" *ngIf="!!node.isEditable && node.isEditable">\r\n        <hel-input-with-button [value]="node.name" (cancel)="onCancel(node,$event)"\r\n                               (done)="onEdited(node,$event)"></hel-input-with-button>\r\n      </li>\r\n</div>\r\n<ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">\r\n  <ng-container matTreeNodeOutlet></ng-container>\r\n</ul>\r\n</li>\r\n</mat-nested-tree-node>\r\n</mat-tree>\r\n</div>\r\n',host:{"(document:keyup)":"onKeyDown($event)"},styles:[".example-tree-invisible{display:none}.example-tree li,.example-tree ul{margin-top:0;margin-bottom:0;list-style-type:none}.isSelected{background:red}.tree-options{display:inline}.container-tree{overflow:scroll;height:350px;width:100%}.tree-node{-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none;-ms-user-select:none}.tree-node-text{display:inline;margin-bottom:0}"]}]}],he.ctorParameters=function(){return[{type:se},{type:o.Router},{type:s.ElementRef}]},he.propDecorators={tree:[{type:s.ViewChild,args:["tree"]}],data:[{type:s.Input}],showOptionsNode:[{type:s.Input}],removed:[{type:s.Output}],edited:[{type:s.Output}],added:[{type:s.Output}],collapseParent:[{type:s.Output}],rangeScrolled:[{type:s.Output}],nodeSelected:[{type:s.Output}],dobleClick:[{type:s.Output}],keypressDelete:[{type:s.Output}],keypressInsert:[{type:s.Output}],checkedOptionNode:[{type:s.Output}],uncheckedOptionNode:[{type:s.Output}]},he);function he(e,t,n){if(this.treeHelisaService=e,this.router=t,this.elementRef=n,this.selectedOptions=new Map,this.showOptionsNode=!0,this.removed=new s.EventEmitter,this.edited=new s.EventEmitter,this.added=new s.EventEmitter,this.collapseParent=new s.EventEmitter,this.rangeScrolled=new s.EventEmitter,this.nodeSelected=new s.EventEmitter,this.dobleClick=new s.EventEmitter,this.keypressDelete=new s.EventEmitter,this.keypressInsert=new s.EventEmitter,this.checkedOptionNode=new s.EventEmitter,this.uncheckedOptionNode=new s.EventEmitter,this.treeControl=new i.NestedTreeControl(function(e){return e.children}),this.dataSource=new d.MatTreeNestedDataSource,this.isSingleClick=!0,this.currentNode=null,this.hasChild=function(e,t){return!!t.children&&0<t.children.length},this.data){var o=this.data;this.data=null,this.receivePage(o.children)}else this.dataSource.data=[],this.treeControl.dataNodes=[]}var me=(fe.prototype.setDataSource=function(e){this.emitChangeSource.next(e)},fe.decorators=[{type:s.Injectable}],fe.ctorParameters=function(){return[]},fe);function fe(){this.emitChangeSource=new l.BehaviorSubject([]),this.dataSource$=this.emitChangeSource.asObservable()}var be=(ge.prototype.ngOnInit=function(){var t=this;this.isRemote&&this.autocompleteHelisaService.dataSource$.subscribe(function(e){setTimeout(function(){t.options=e,t.filteredOptions=l.of(t.options)})}),this.filteredOptions=this.myControl.valueChanges.pipe(a.startWith(""),a.map(function(e){return t._filter(e)}))},ge.prototype.displayFn=function(e){return e?e.displayText:undefined},ge.prototype.getService=function(){return this.autocompleteHelisaService},ge.prototype._filter=function(e){if(!(e instanceof Object)){if(this.isRemote)return this.options;var o=e.toLowerCase().split(" ");return this.options.filter(function(t){var n=!0;return o.forEach(function(e){return n=n&&0<=t.displayText.toLowerCase().indexOf(e)}),n}).splice(0,5)}},ge.prototype.onSelected=function(e){this.selectedValue=e.option.value,this.onSelectedValue.emit(this.selectedValue.value)},ge.prototype.getNextPage=function(){this.nextPage.emit()},ge.decorators=[{type:s.Component,args:[{selector:"hel-autocomplete",template:'<mat-form-field>\r\n  <input type="text" matInput [formControl]="myControl" [matAutocomplete]="auto"> \r\n  <mat-autocomplete [displayWith]="displayFn" #auto="matAutocomplete" (optionSelected)="onSelected($event)" (optionsScroll)="getNextPage()">\r\n    <mat-option *ngFor="let option of filteredOptions | async; let idx = index" [value]="option">\r\n      {{option.displayText}}\r\n    </mat-option>\r\n  </mat-autocomplete>\r\n</mat-form-field>',providers:[me],styles:[""]}]}],ge.ctorParameters=function(){return[{type:me}]},ge.propDecorators={myControl:[{type:s.Input}],options:[{type:s.Input}],onSelectedValue:[{type:s.Output}],nextPage:[{type:s.Output}],isRemote:[{type:s.Input}]},ge);function ge(e){this.autocompleteHelisaService=e,this.myControl=new M.FormControl,this.options=new Array,this.onSelectedValue=new s.EventEmitter,this.nextPage=new s.EventEmitter,this.isRemote=!1,this.isLoading=!1}var ye=(ve.prototype.removeScrollEventListener=function(){this.autoComplete&&this.autoComplete.panel&&this.autoComplete.panel.nativeElement&&this.autoComplete.panel.nativeElement.removeEventListener("scroll",this.onScroll)},ve.prototype.ngOnDestroy=function(){this._onDestroy.next(),this._onDestroy.complete(),this.removeScrollEventListener()},ve.prototype.onScroll=function(e){this.thresholdPercent===undefined?this.scroll.next({autoComplete:this.autoComplete,scrollEvent:e}):100*this.thresholdPercent*e.target.scrollHeight/100<e.target.scrollTop+e.target.clientHeight&&this.scroll.next({autoComplete:this.autoComplete,scrollEvent:e})},ve.decorators=[{type:s.Directive,args:[{selector:"mat-autocomplete[optionsScroll]"}]}],ve.ctorParameters=function(){return[{type:d.MatAutocomplete}]},ve.propDecorators={thresholdPercent:[{type:s.Input}],scroll:[{type:s.Output,args:["optionsScroll"]}]},ve);function ve(e){var t=this;this.autoComplete=e,this.thresholdPercent=.8,this.scroll=new s.EventEmitter,this._onDestroy=new l.Subject,this.autoComplete.opened.pipe(a.tap(function(){setTimeout(function(){t.removeScrollEventListener(),t.autoComplete&&t.autoComplete.panel&&t.autoComplete.panel.nativeElement&&t.autoComplete.panel.nativeElement.addEventListener("scroll",t.onScroll.bind(t))})}),a.takeUntil(this._onDestroy)).subscribe(),this.autoComplete.closed.pipe(a.tap(function(){return t.removeScrollEventListener()}),a.takeUntil(this._onDestroy)).subscribe()}var Ce=(we.decorators=[{type:s.NgModule,args:[{declarations:[N,R,j,q,G,ne,pe,ie,be,ye],imports:[T.CommonModule,M.FormsModule,M.ReactiveFormsModule,d.MatAutocompleteModule,d.MatButtonModule,d.MatCheckboxModule,c.MatToolbarModule,u.MatExpansionModule,p.MatFormFieldModule,d.MatInputModule,h.MatSelectModule,d.MatOptionModule,m.MatListModule,f.MatIconModule,d.MatSnackBarModule,b.MatCardModule,g.LayoutModule,c.MatToolbarModule,d.MatButtonModule,d.MatSidenavModule,f.MatIconModule,m.MatListModule,d.MatGridListModule,b.MatCardModule,d.MatMenuModule,d.MatInputModule,h.MatSelectModule,d.MatRadioModule,y.MatProgressSpinnerModule,d.MatTableModule,d.MatPaginatorModule,d.MatSortModule,v.MatDialogModule,C.MatTabsModule,w.MatDatepickerModule,d.MatNativeDateModule,S.MatStepperModule,O.MatChipsModule,x.DragDropModule,E.MatTreeModule],exports:[N,R,j,q,G,ne,pe,ie,be,ye,d.MatButtonModule,d.MatCheckboxModule,c.MatToolbarModule,u.MatExpansionModule,p.MatFormFieldModule,d.MatInputModule,h.MatSelectModule,d.MatOptionModule,m.MatListModule,f.MatIconModule,d.MatSnackBarModule,b.MatCardModule,g.LayoutModule,c.MatToolbarModule,d.MatButtonModule,d.MatSidenavModule,f.MatIconModule,m.MatListModule,d.MatGridListModule,b.MatCardModule,d.MatMenuModule,d.MatInputModule,h.MatSelectModule,d.MatRadioModule,y.MatProgressSpinnerModule,d.MatTableModule,d.MatPaginatorModule,d.MatSortModule,v.MatDialogModule,C.MatTabsModule,w.MatDatepickerModule,d.MatNativeDateModule,S.MatStepperModule,O.MatChipsModule,x.DragDropModule,E.MatTreeModule],providers:[U,se]}]}],we);function we(){}e.InputWithButtonComponent=N,e.ToastHelisaComponent=R,e.ToastHelisaService=k,e.ToastType={DONE:"done",ERROR:"error",INFO:"info"},e.AlertHelisaType=A,e.AlertHelisaComponent=j,e.AlertHelisaService=B,e.DependencyTableHelisaComponent=q,e.DependencyTableHelisaService=L,e.InputHelisaComponent=G,e.TableHelisaComponent=ne,e.EventScope=K,e.TotalType=z,e.ChangeColumnConfigurationType=J,e.TableHelisaType=Q,e.ColumnConfigUtil=X,e.TableHelisaService=U,e.DateHelisaComponent=ie,e.TreeHelisaComponent=pe,e.TreeHelisaConnect=ce,e.TreeHelisaService=se,e.AutocompleteHelisaComponent=be,e.AutocompleteHelisaService=me,e.OptionsScrollDirective=ye,e.HelisaLibModule=Ce,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=helisa-lib.umd.min.js.map